(function(a){a.fn.hasAttr=function(b){return this.attr(b)!==void 0}})(jQuery);function ModalRemote(a){function b(){this.show(),this.displayLoading()}function c(f){this.setTitle(f.status+f.statusText),this.setContent(f.responseText),this.addFooterButton("Close","button","btn btn-default",function(){this.hide()})}function d(f){return void 0!==f.forceReload&&f.forceReload&&("true"==f.forceReload?$.pjax.reload({container:"#crud-datatable-pjax"}):$.pjax.reload({container:f.forceReload})),void 0!==f.forceClose&&f.forceClose?void this.hide():void(void 0!==f.size&&this.setSize(f.size),void 0!==f.title&&this.setTitle(f.title),void 0!==f.content&&this.setContent(f.content),void 0!==f.footer&&this.setFooter(f.footer),void 0!==$(this.content).find("form")[0]&&this.setupFormSubmit($(this.content).find("form")[0],$(this.footer).find("[type=\"submit\"]")[0]))}this.defaults={okLabel:"OK",executeLabel:"Execute",cancelLabel:"Cancel",loadingTitle:"Loading"},this.modal=$(a),this.dialog=$(a).find(".modal-dialog"),this.header=$(a).find(".modal-header"),this.content=$(a).find(".modal-body"),this.footer=$(a).find(".modal-footer"),this.loadingContent="<div class=\"progress progress-striped active\" style=\"margin-bottom:0;\"><div class=\"progress-bar\" style=\"width: 100%\"></div></div>",this.show=function(){this.clear(),$(this.modal).modal("show")},this.hide=function(){$(this.modal).modal("hide")},this.toggle=function(){$(this.modal).modal("toggle")},this.clear=function(){$(this.modal).find(".modal-title").remove(),$(this.content).html(""),$(this.footer).html("")},this.setSize=function(f){$(this.dialog).removeClass("modal-lg"),$(this.dialog).removeClass("modal-sm"),"large"==f?$(this.dialog).addClass("modal-lg"):"small"==f?$(this.dialog).addClass("modal-sm"):"normal"!==f&&console.warn("Undefined size "+f)},this.setHeader=function(f){$(this.header).html(f)},this.setContent=function(f){$(this.content).html(f)},this.setFooter=function(f){$(this.footer).html(f)},this.setTitle=function(f){$(this.header).find("h4.modal-title").remove(),$(this.header).append("<h4 class=\"modal-title\">"+f+"</h4>")},this.hidenCloseButton=function(){$(this.header).find("button.close").hide()},this.showCloseButton=function(){$(this.header).find("button.close").show()},this.displayLoading=function(){this.setContent(this.loadingContent),this.setTitle(this.defaults.loadingTitle)},this.addFooterButton=function(f,g,h,i){buttonElm=document.createElement("button"),buttonElm.setAttribute("type",null===g?"button":g),buttonElm.setAttribute("class",null===h?"btn btn-primary":h),buttonElm.innerHTML=f;var j=this;$(this.footer).append(buttonElm),null!==i&&$(buttonElm).click(function(k){i.call(j,this,k)})},this.doRemote=function(f,g,h,i=!1){var j=this;$.ajax({url:f,method:g,data:h,async:i,beforeSend:function(){b.call(j)},error:function(k){c.call(j,k)},success:function(k){d.call(j,k)},contentType:!1,cache:!1,processData:!1})},this.setupFormSubmit=function(f,g){if(g===void 0)console.warn("Modal has form but does not have a submit button");else{var h=this;$(g).click(function(){var j;j=window.FormData?new FormData($(f)[0]):$(f).serializeArray(),h.doRemote($(f).attr("action"),$(f).hasAttr("method")?$(f).attr("method"):"GET",j)})}},this.confirmModal=function(f,g,h,i,j,k,l,m,n){this.show(),this.setSize(j),f!==void 0&&this.setTitle(f),this.setContent("<form id=\"ModalRemoteConfirmForm\">"+g);var o=this;!1!==h&&this.addFooterButton(h===void 0?this.defaults.okLabel:h,"submit","btn btn-primary",function(){var q;window.FormData?(q=new FormData($("#ModalRemoteConfirmForm")[0]),"undefined"!=typeof m&&m&&q.append("pks",m.join())):(q=$("#ModalRemoteConfirmForm"),"undefined"!=typeof m&&m&&(q.pks=m),q=q.serializeArray()),o.doRemote(k,l,q,n)}),this.addFooterButton(i===void 0?this.defaults.cancelLabel:i,"button","btn btn-default pull-left",function(){this.hide()})},this.open=function(f,g){$(f).hasAttr("data-confirm-title")||$(f).hasAttr("data-confirm-message")?this.confirmModal($(f).attr("data-confirm-title"),$(f).attr("data-confirm-message"),!$(f).attr("data-confirm-alert")&&$(f).attr("data-confirm-ok"),$(f).attr("data-confirm-cancel"),$(f).hasAttr("data-modal-size")?$(f).attr("data-modal-size"):"normal",$(f).hasAttr("href")?$(f).attr("href"):$(f).attr("data-url"),$(f).hasAttr("data-request-method")?$(f).attr("data-request-method"):"GET",g,$(f).hasAttr("data-request-async")?"false"!==$(f).attr("data-request-async"):null):this.doRemote($(f).hasAttr("href")?$(f).attr("href"):$(f).attr("data-url"),$(f).hasAttr("data-request-method")?$(f).attr("data-request-method"):"GET",g,$(f).hasAttr("data-request-async")?"false"!==$(f).attr("data-request-async"):null)}}