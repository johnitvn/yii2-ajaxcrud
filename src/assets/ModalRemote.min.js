function ModalRemote(a){function b(){this.show(),this.displayLoading()}function c(a){this.setTitle(a.status+a.statusText),this.setContent(a.responseText),this.addFooterButton("Close","button","btn btn-default",function(a,b){this.hide()})}function d(a){if(void 0!==a.forceReload&&a.forceReload&&("true"==a.forceReload?document.getElementById("#crud-datatable-pjax")&&$.pjax.reload({container:"#crud-datatable-pjax"}):document.getElementById(a.forceReload)&&$.pjax.reload({container:a.forceReload})),void 0!==a.forceClose&&a.forceClose)return void this.hide();void 0!==a.size&&this.setSize(a.size),void 0!==a.title&&this.setTitle(a.title),void 0!==a.content&&this.setContent(a.content),void 0!==a.footer&&this.setFooter(a.footer),void 0!==$(this.content).find("form")[0]&&this.setupFormSubmit($(this.content).find("form")[0],$(this.footer).find('[type="submit"]')[0])}this.defaults={okLabel:"OK",executeLabel:"Execute",cancelLabel:"Cancel",loadingTitle:"Loading"},this.modal=$(a),this.dialog=$(a).find(".modal-dialog"),this.header=$(a).find(".modal-header"),this.content=$(a).find(".modal-body"),this.footer=$(a).find(".modal-footer"),this.loadingContent='<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>',this.show=function(){this.clear(),$(this.modal).modal("show")},this.hide=function(){$(this.modal).modal("hide")},this.toggle=function(){$(this.modal).modal("toggle")},this.clear=function(){$(this.modal).find(".modal-title").remove(),$(this.content).html(""),$(this.footer).html("")},this.setSize=function(a){$(this.dialog).removeClass("modal-lg"),$(this.dialog).removeClass("modal-sm"),"large"==a?$(this.dialog).addClass("modal-lg"):"small"==a?$(this.dialog).addClass("modal-sm"):"normal"!==a&&console.warn("Undefined size "+a)},this.setHeader=function(a){$(this.header).html(a)},this.setContent=function(a){$(this.content).html(a)},this.setFooter=function(a){$(this.footer).html(a)},this.setTitle=function(a){$(this.header).find("h4.modal-title").remove(),$(this.header).append('<h4 class="modal-title">'+a+"</h4>")},this.hidenCloseButton=function(){$(this.header).find("button.close").hide()},this.showCloseButton=function(){$(this.header).find("button.close").show()},this.displayLoading=function(){this.setContent(this.loadingContent),this.setTitle(this.defaults.loadingTitle)},this.addFooterButton=function(a,b,c,d){buttonElm=document.createElement("button"),buttonElm.setAttribute("type",null===b?"button":b),buttonElm.setAttribute("class",null===c?"btn btn-primary":c),buttonElm.innerHTML=a;var e=this;$(this.footer).append(buttonElm),null!==d&&$(buttonElm).click(function(a){d.call(e,this,a)})},this.doRemote=function(a,e,f){var g=this;$.ajax({url:a,method:e,data:f,async:!1,beforeSend:function(){b.call(g)},error:function(a){c.call(g,a)},success:function(a){d.call(g,a)},contentType:!1,cache:!1,processData:!1})},this.setupFormSubmit=function(a,b){if(void 0===b)console.warn("Modal has form but does not have a submit button");else{var c=this;$(b).click(function(b){var d;d=window.FormData?new FormData($(a)[0]):$(a).serializeArray(),c.doRemote($(a).attr("action"),$(a).hasAttr("method")?$(a).attr("method"):"GET",d)})}},this.confirmModal=function(a,b,c,d,e,f,g,h){this.show(),this.setSize(e),void 0!==a&&this.setTitle(a),this.setContent('<form id="ModalRemoteConfirmForm">'+b);var i=this;!1!==c&&this.addFooterButton(void 0===c?this.defaults.okLabel:c,"submit","btn btn-primary",function(a){var b;window.FormData?(b=new FormData($("#ModalRemoteConfirmForm")[0]),void 0!==h&&h&&b.append("pks",h.join())):(b=$("#ModalRemoteConfirmForm"),void 0!==h&&h&&(b.pks=h),b=b.serializeArray()),i.doRemote(f,g,b)}),this.addFooterButton(void 0===d?this.defaults.cancelLabel:d,"button","btn btn-default pull-left",function(a){this.hide()})},this.open=function(a,b){$(a).hasAttr("data-confirm-title")||$(a).hasAttr("data-confirm-message")?this.confirmModal($(a).attr("data-confirm-title"),$(a).attr("data-confirm-message"),!$(a).attr("data-confirm-alert")&&$(a).attr("data-confirm-ok"),$(a).attr("data-confirm-cancel"),$(a).hasAttr("data-modal-size")?$(a).attr("data-modal-size"):"normal",$(a).hasAttr("href")?$(a).attr("href"):$(a).attr("data-url"),$(a).hasAttr("data-request-method")?$(a).attr("data-request-method"):"GET",b):this.doRemote($(a).hasAttr("href")?$(a).attr("href"):$(a).attr("data-url"),$(a).hasAttr("data-request-method")?$(a).attr("data-request-method"):"GET",b)}}!function(a){a.fn.hasAttr=function(a){return void 0!==this.attr(a)}}(jQuery);